<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="search">

<!-- 매거진 타이틀 등록 -->
	<insert id="RECENTSEARCHINSERT" parameterType="hashmap" useGeneratedKeys="true" keyProperty="SEARCH_NUMBER">
		<selectKey keyProperty="SEARCH_NUMBER" resultType="string" order="BEFORE">
			SELECT SEARCH_NUMBER_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		<![CDATA[
			INSERT INTO SEARCH
			(
				SEARCH_NUMBER,
				MEMBER_NUMBER,
				SEARCH_RECENT
			)
			VALUES
			(
				#{SEARCH_NUMBER},
				#{MEMBER_NUMBER},
				#{ISSEARCH}
			)
		]]>
	</insert>
	
	<!-- 스토리 리스트 -->
	<select id="RECENTSEARCH" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    SEARCH_NUMBER,
			    MEMBER_NUMBER,
			    SEARCH_RECENT
			FROM SEARCH
			ORDER BY SEARCH_NUMBER DESC
		]]>
	</select>

	
	<!-- 스토리 리스트
	<select id="SEARCH" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
 	
	SELECT 
    	S.SNS_NUMBER,
		S.SNS_CONTENT,
      	M.MG_NUMBER,
  		M.MG_TITLE,
		M.MG_CONTENT,
    	M.MG_TYPE,
    	M.MG_STYLE,
    	M.MG_SPACE,
    	M.MG_AVERAGE,
    	M.MG_HASHTAG,
    	G.GOODS_NUMBER,
    	G.GOODS_NAME,
    	G.GOODS_CATEGORY1,
    	G.GOODS_CATEGORY2,
    	G.GOODS_BRNAME
	FROM MAGAZINEBOARD M, SNSBOARD S, GOODS G
	WHERE M.MEMBER_NUMBER = S.MEMBER_NUMBER AND
          S.MEMBER_NUMBER = G.MEMBER_NUMBER AND
       	(
		S.SNS_CONTENT LIKE '%' || #{ISSEARCH} || '%' OR
		M.MG_TITLE LIKE '%' || #{ISSEARCH} || '%' OR
		M.MG_CONTENT LIKE '%' || #{ISSEARCH} || '%' OR
    	M.MG_TYPE LIKE '%' || #{ISSEARCH} || '%' OR
      	M.MG_STYLE LIKE '%' || #{ISSEARCH} || '%' OR
      	M.MG_SPACE LIKE '%' || #{ISSEARCH} || '%' OR
      	M.MG_AVERAGE LIKE '%' || #{ISSEARCH} || '%' OR
      	M.MG_HASHTAG LIKE '%' || #{ISSEARCH} || '%' OR
      	G.GOODS_NAME LIKE '%' || #{ISSEARCH} || '%' OR
      	G.GOODS_CATEGORY1 LIKE '%' || #{ISSEARCH} || '%' OR
      	G.GOODS_CATEGORY2 LIKE '%' || #{ISSEARCH} || '%' OR
      	G.GOODS_BRNAME LIKE '%' || #{ISSEARCH} || '%'
      	)
		]]>
	</select> -->
	
	<!-- 스토리 리스트 -->
	<select id="SNSSEARCH" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    SNS_NUMBER,
			    SNS_CONTENT,
			    SNS_REGDATE
			FROM SNSBOARD
			ORDER BY SNS_REGDATE DESC
		]]>
	</select>
	
	<!-- 아이디 리스트 -->
	<select id="MEMBERSEARCH" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    MEMBER_NUMBER,
			    MEMBER_ID
			FROM MEMBER
			ORDER BY MEMBER_NUMBER DESC
		]]>
	</select>
	
	<!-- 매거진 리스트 -->
	<select id="MGSEARCH" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    MG_NUMBER,
			    MG_TITLE,
			    MG_CONTENT,
			    MG_TYPE,
			    MG_STYLE,
			    MG_SPACE,
			    MG_AVERAGE,
			    MG_REGDATE
			FROM MAGAZINEBOARD
			ORDER BY MG_REGDATE DESC
		]]>
	</select>
	
	<!-- 상품 리스트 -->
	<select id="GOODSSEARCH" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    GOODS_NUMBER,
			    GOODS_NAME,
			    GOODS_CATEGORY1,
			    GOODS_CATEGORY2,
			    GOODS_BRNAME
			FROM GOODS
			ORDER BY GOODS_NUMBER DESC
		]]>
	</select>
	


			 
</mapper>